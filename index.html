<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Introducción al Test de Opción Múltiple</title>
<style>
  /* Reset básico */
  *, *::before, *::after {
    box-sizing: border-box;
  }
  html, body {
    margin: 0; padding: 0;
    background-color: #121212;
    color: #e0e7ff;
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
      Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    line-height: 1.5;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  header {
    position: sticky;
    top: 0;
    background: #1e293b;
    padding: 1rem 2rem;
    box-shadow: 0 1px 3px rgb(0 0 0 / 0.5);
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 10;
  }
  header .logo {
    font-weight: 700;
    font-size: 1.5rem;
    color: #60a5fa;
    letter-spacing: 0.05em;
  }
  nav a {
    color: #94a3b8;
    margin-left: 1.5rem;
    text-decoration: none;
    font-weight: 600;
    font-size: 1rem;
    transition: color 0.3s ease;
  }
  nav a:hover,
  nav a:focus-visible {
    color: #3b82f6;
    outline: none;
  }
  main {
    flex: 1 0 auto;
    max-width: 720px;
    margin: 4rem auto 6rem;
    padding: 2rem 1.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  section.hero {
    background: #1e293b;
    border-radius: 0.75rem;
    padding: 3rem 2.5rem;
    width: 100%;
    box-shadow: 0 8px 24px rgb(59 130 246 / 0.3);
    text-align: center;
  }
  h1 {
    font-size: 3rem;
    font-weight: 800;
    color: #60a5fa;
    margin-bottom: 1rem;
    line-height: 1.1;
  }
  p.subtext {
    font-size: 1.125rem;
    color: #94a3b8;
    margin-bottom: 3rem;
    font-weight: 500;
  }
  button.cta {
    background-color: #3b82f6;
    color: white;
    border: none;
    padding: 1.2rem 3rem;
    font-size: 1.25rem;
    font-weight: 700;
    border-radius: 0.75rem;
    cursor: pointer;
    box-shadow: 0 6px 15px rgb(59 130 246 / 0.5);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    user-select: none;
  }
  button.cta:hover,
  button.cta:focus-visible {
    background-color: #2563eb;
    box-shadow: 0 8px 20px rgb(37 99 235 / 0.7);
    outline: none;
  }
  /* Footer */
  footer {
    text-align: center;
    padding: 2rem 1rem;
    color: #64748b;
    font-size: 0.875rem;
    flex-shrink: 0;
    user-select: none;
  }
</style>
</head>
<body>
<header>
  <div class="logo" aria-label="Logo del test">Karl Marx Test</div>
  <nav aria-label="Navegación principal">
  </nav>
</header>
<main id="app">
  <section class="hero" id="intro" role="region" aria-labelledby="hero-title">
    <h1 id="hero-title">Bienvenido al Test de Opción Múltiple</h1>
    <p class="subtext">Evalúa tus conocimientos con este test sencillo y rápido. Pulsa el botón para comenzar.</p>
    <button class="cta" id="start-button" aria-describedby="hero-title">Comenzar Test</button>
  </section>
</main>
<footer>
  &copy; 2024 MultiChoice. Diseñado para una experiencia elegante y clara.
</footer>
<script>
(() => {
  const startBtn = document.getElementById('start-button');
  const navStart = document.getElementById('nav-start');
  const app = document.getElementById('app');

  const testHTML = `
  <section id="test-section" aria-label="Test de opción múltiple" role="main" tabindex="-1" style="outline:none;">
    <h2>Realiza el Test</h2>
    <form id="test-form" novalidate></form>
    <button id="submit-test" style="display:none; margin-top:1.5rem;">Enviar respuestas</button>
    <div id="result-container" aria-live="polite" style="margin-top:1rem;"></div>
    <button id="restart" style="display:none; margin-top:1.5rem;">Reiniciar</button>
  </section>
  `;

  const questionsData = [
    {
      question: "¿Cuál es la capital de España?",
      options: ["Madrid", "Barcelona", "Valencia", "Sevilla"],
      answer: 0
    },
    {
      question: "¿En qué año llegó el hombre a la Luna?",
      options: ["1965", "1969", "1972", "1959"],
      answer: 1
    },
    {
      question: "¿Cuál es el elemento químico con símbolo O?",
      options: ["Oxígeno", "Oro", "Osmio", "Plata"],
      answer: 0
    }
  ];

  function createElement(type, attrs = {}, ...children) {
    const el = document.createElement(type);
    for (const key in attrs) {
      if (key === "className") el.className = attrs[key];
      else if (key.startsWith("aria")) el.setAttribute(key, attrs[key]);
      else if (key === "htmlFor") el.htmlFor = attrs[key];
      else el[key] = attrs[key];
    }
    for (const child of children) {
      if (typeof child === "string") el.appendChild(document.createTextNode(child));
      else if (child instanceof Node) el.appendChild(child);
    }
    return el;
  }

  function buildTestForm(container, questions) {
    const testForm = container.querySelector("#test-form");
    const submitBtn = container.querySelector("#submit-test");
    const resultContainer = container.querySelector("#result-container");
    const restartBtn = container.querySelector("#restart");

    testForm.innerHTML = "";
    resultContainer.innerHTML = "";
    submitBtn.style.display = "inline-block";
    restartBtn.style.display = "none";

    questions.forEach((q, i) => {
      const containerDiv = createElement("div", {className: "question-container", role: "group", "aria-labelledby": `q${i}_label`});
      const qText = createElement("div", {className: "question-text", id: `q${i}_label`}, `${i + 1}. ${q.question}`);
      containerDiv.appendChild(qText);

      const ul = createElement("ul", {className: "options"});
      q.options.forEach((opt, idx) => {
        const optionId = `q${i}_opt${idx}`;
        const li = createElement("li");
        const label = createElement("label", {htmlFor: optionId});
        const radio = createElement("input", {
          type: "radio",
          name: `question${i}`,
          id: optionId,
          value: idx,
          required: true,
        });
        label.appendChild(radio);
        label.appendChild(document.createTextNode(opt));
        li.appendChild(label);
        ul.appendChild(li);
      });
      containerDiv.appendChild(ul);
      testForm.appendChild(containerDiv);
    });

    submitBtn.addEventListener("click", () => {
      const formData = new FormData(testForm);
      for(let i = 0; i < questions.length; i++) {
        if(!formData.has(`question${i}`)) {
          alert(`Por favor responde la pregunta ${i + 1}.`);
          return;
        }
      }
      showResults(formData, questions, resultContainer, submitBtn, restartBtn);
    });

    restartBtn.addEventListener("click", () => {
      buildTestForm(container, questions);
      resultContainer.innerHTML = "";
      submitBtn.style.display = "inline-block";
      restartBtn.style.display = "none";
    });

    container.focus();
  }

  function showResults(formData, questions, resultContainer, submitBtn, restartBtn) {
    let correctCount = 0;
    resultContainer.innerHTML = "";
    submitBtn.style.display = "none";
    restartBtn.style.display = "inline-block";

    questions.forEach((q, i) => {
      const userAnswer = formData.get(`question${i}`);
      const isCorrect = Number(userAnswer) === q.answer;
      if (isCorrect) correctCount++;

      const container = createElement("div", {className: "question-container"});
      const qText = createElement("div", {className: "question-text"}, `${i + 1}. ${q.question}`);
      container.appendChild(qText);

      const feedback = createElement(
        "div",
        {className: "answer-feedback " + (isCorrect ? "correct" : "incorrect")},
        isCorrect ? "Correcto ✅" : `Incorrecto ❌. Respuesta correcta: "${q.options[q.answer]}"`
      );
      container.appendChild(feedback);
      resultContainer.appendChild(container);
    });

    const summary = createElement(
      "div",
      {className: "result"},
      `Has respondido correctamente ${correctCount} de ${questions.length} preguntas.`
    );
    resultContainer.insertBefore(summary, resultContainer.firstChild);
  }

  function loadTest() {
    app.innerHTML = testHTML;
    const container = app.querySelector("#test-section");
    buildTestForm(container, questionsData);
  }

  // Eventos para comenzar test
  startBtn.addEventListener("click", loadTest);
  navStart.addEventListener("click", (e) => {
    e.preventDefault();
    loadTest();
  });
})();
</script>
<style>
  
  #test-section h2 {
    font-weight: 800;
    font-size: 2rem;
    margin-bottom: 1.5rem;
    color: #60a5fa;
  }
  .question-container {
    background-color: #1e293b;
    padding: 1rem 1.5rem;
    border-radius: 0.75rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 2px 10px rgb(59 130 246 / 0.3);
  }
  .question-text {
    font-weight: 700;
    font-size: 1.125rem;
    margin-bottom: 0.75rem;
    color: #cbd5e1;
  }
  ul.options li label {
    font-weight: 600;
    color: #94a3b8;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    cursor: pointer;
  }
  ul.options li label:hover,
  ul.options li label:focus-visible {
    color: #60a5fa;
    outline: none;
  }
  input[type="radio"] {
    width: 20px;
    height: 20px;
    accent-color: #3b82f6;
    cursor: pointer;
  }
  button#submit-test, button#restart {
    background-color: #3b82f6;
    color: white;
    border: none;
    padding: 1rem 2.5rem;
    font-size: 1.125rem;
    border-radius: 0.75rem;
    cursor: pointer;
    font-weight: 800;
    transition: background-color 0.3s ease;
  }
  button#submit-test:hover, button#restart:hover,
  button#submit-test:focus-visible, button#restart:focus-visible {
    background-color: #2563eb;
    outline: none;
  }
  .result {
    color: #a5b4fc;
    font-weight: 800;
    font-size: 1.25rem;
    margin-bottom: 1rem;
    text-align: center;
    user-select: text;
  }
  .answer-feedback {
    font-style: italic;
    font-size: 0.875rem;
    margin-top: 0.5rem;
    color: #94a3b8;
  }
  .correct {
    color: #4ade80;
  }
  .incorrect {
    color: #f87171;
  }
</style>
</body>
</html>